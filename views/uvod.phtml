<section class="horniPanel d-flex justify-content-between p-5">
  <div class="infobox AktualniTeplota text-center  col-xl-3 col-lg-3 col-md-12">
    <h3 class="p-1 blueRow">Dříve touto dobou</h3>
    <?php while($row = ibase_fetch_object($posledniDobou)) : ?>
        <p class="statistika"><?= $row->CAS ?> <?= $row->TEPLOTA?>&deg;C <?= $row->RELVLHKOST ?>%</p>
    <?php endwhile  ?>

  </div>
  <div class="infobox AktualniTeplota p-5 text-center col-xl-5 col-lg-5 col-md-12">
    <div class="teplota">
      <h2>Aktuální teplota: <?= $teplota[0] ?>&deg;C</h2>
      <h4><?= $teplota[1] ?></h4>
    </div>
    <div class="row justify-content-center pt-3">
      <div class="vlhkost d-flex align-items-center justify-content-center text-center blueRow col-5 mx-1">
        <h2>Vlhkost: <?= $Vlhkost['RELVLHKOST'] ?>%</h2>
      </div>
      <div class="rosnybod d-flex align-items-center justify-content-center text-center redRow col-5">
        <h2>Rosný bod: <?= $Vlhkost['ROSNYBOD'] ?>&deg;C</h2>
      </div>
    </div>
    <div class="row justify-content-center pt-3">
      <div class="Vitr d-flex align-items-center justify-content-center text-center greenRow col-5 mx-1">
        <h2>Vítr: <?= $vitrTlak['RYCHLOST'] ?>km/h</h2>
      </div>
      <div class="Tlak d-flex align-items-center justify-content-center text-center orangeRow col-5">
        <h2>Tlak: <?= $vitrTlak['TLAK'] ?>hPa</h2>
      </div>
    </div>

  </div>
  <div class="infobox AktualniTeplota text-center col-xl-3 col-lg-3 col-md-12">
          <h3 class="p-1 blueRow">Statistiky</h3>
          <p class="statistika">Název čidla: <?= $jmenoCidla['JMENO'] ?></p>
          <p class="statistika">Počet měření: <?= $pocetMereni[0] ?></p>
          <p class="statistika">První měření: <?= $prvniMer[0] ?></p>
          <p class="statistika">Maximální teplota: <?= $maxTeplota['TEPLOTA'] ?>&deg;C</p>
          <p class="statistika">Minimální teplota: <?= $minTeplota['TEPLOTA'] ?>&deg;C</p>
  </div>
</section>

  <div class="p-4 dolejsekWrapper">
    <section class="ajmenu w-75 mx-auto">
      <ul class="nav nav-pills nav-fill bg-dark">
  <li class="nav-item" onClick="clickAjHandler(`aktualne`)">
    <a class="nav-link pt-3 active">Aktuálně</a>
  </li>
  <li class="nav-item" onClick="clickAjHandler(`dennisouhrn`)">
    <a class="nav-link pt-3">Denní souhrny</a>
  </li>
  <li class="nav-item" onClick="clickAjHandler(`mesicnisouhrn`)">
    <a class="nav-link pt-3">Měsíční souhrny</a>
  </li>
  <li class="nav-item" onClick="clickAjHandler(`rocnisouhrn`)">
    <a class="nav-link pt-3">Roční souhrny</a>
  </li>
  </ul>
    <div id="ajoutput"></div>
    </section>
  </div>
  <script type="text/javascript">
  if (window.XMLHttpRequest) {
      xmlhttp = new XMLHttpRequest();
  } else {
      xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        if (document.getElementById("ajoutput").innerHTML = "") {
          document.getElementById("ajoutput").innerHTML = "<p><img src='images/loading.gif'></p>";
        }
          document.getElementById("ajoutput").innerHTML = this.responseText;
          //Graf aktualne 1.1
          google.charts.load('current', {'packages':['line']});

          google.charts.setOnLoadCallback(drawChart_Aktualne_1_1);
          function drawChart_Aktualne_1_1() {
          google.charts.load('current', {'packages':['line']});
          google.charts.setOnLoadCallback(drawBasic_Aktuale_1_1);
          function drawBasic_Aktuale_1_1() {
              var data = new google.visualization.DataTable();
              data.addColumn('number', 'čas');
              data.addColumn('number', 'Teplota');

              data.addColumn('number', 'Rychlost větru');


              data.addRows([
                  <?php while($dataGraf = ibase_fetch_object($getTimeAndTemp)) : ?>
                    <?=  $dataGraf->DATA ?>,
                  <?php endwhile ?>
              ]);

              var options = {
                'title': 'Posledních 24 hodin',
                'curveType': 'function',
                hAxis: {
                  title: 'Čas'
                },
                vAxis: {
                  title: 'Hodnota'
                }
              };
              var chart = new google.charts.Line(document.getElementById('chart_aktualne'));
              chart.draw(data, google.charts.Line.convertOptions(options));
            }
          }
          //Graf aktualne 1.1 KONEC

          //Graf aktualne 2.1
          google.charts.setOnLoadCallback(drawChart_Aktualne_2_1);
          function drawChart_Aktualne_2_1() {
          google.charts.load('current', {'packages':['line']});
          google.charts.setOnLoadCallback(drawBasic_Aktuale_2_1);
          function drawBasic_Aktuale_2_1() {
              var data = new google.visualization.DataTable();
              data.addColumn('number', 'čas');
              data.addColumn('number', 'vlhkost');

              data.addRows([
                <?php while($dataGraf = ibase_fetch_object($getHumidity)) : ?>
                  <?=  $dataGraf->DATA ?>,
                <?php endwhile ?>
              ]);

              var options = {
                'title':'Poslední 3 dny',
                hAxis: {
                  title: 'Čas'
                },
                vAxis: {
                  title: 'Vlhkost'
                }
              };
              var chart = new google.charts.Line(document.getElementById('chart_aktualne1'));
              chart.draw(data, options);
            }
          }
      }
  };
  //Graf aktualne 2.1 KONEC

  xmlhttp.open("GET","views/home/aktualne.phtml",true);
  xmlhttp.send();

  function clickAjHandler(str) {
        if (window.XMLHttpRequest) {
            xmlhttp = new XMLHttpRequest();
        } else {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
              if (document.getElementById("ajoutput").innerHTML = "") {
                document.getElementById("ajoutput").innerHTML = "<p><img src='images/loading.gif'></p>";
              }
                document.getElementById("ajoutput").innerHTML = this.responseText;
                if (str == "aktualne") {
                  //Graf aktualne 1.2
                  google.charts.load('current', {'packages':['line']});
                  google.charts.setOnLoadCallback(drawChart_Aktualne_1_2);
                  function drawChart_Aktualne_1_2() {
                  google.charts.load('current', {'packages':['line']});
                  google.charts.setOnLoadCallback(drawBasic_Aktuale_1_2);
                  function drawBasic_Aktuale_1_2() {
                      var data = new google.visualization.DataTable();
                      data.addColumn('number', 'čas');
                      data.addColumn('number', 'Teplota');
                      data.addColumn('number', 'Rychlost větru');

                      data.addRows([
                          <?php while($dataGraf = ibase_fetch_object($getTimeAndTemp)) : ?>
                            <?=  $dataGraf->DATA ?>,
                          <?php endwhile ?>
                      ]);

                      var options = {
                        'title': 'Posledních 24 hodin',
                        'curveType': 'function',
                        hAxis: {
                          title: 'Čas'
                        },
                        vAxis: {
                          title: 'Hodnota'
                        }
                      };
                      var chart = new google.charts.Line(document.getElementById('chart_aktualne'));
                      chart.draw(data, google.charts.Line.convertOptions(options));
                    }
                  }
                  //Graf aktualne 1.2 KONEC

                  google.charts.setOnLoadCallback(drawChart_Aktualne_2_2);
                  function drawChart_Aktualne_2_2() {
                  google.charts.load('current', {'packages':['line']});
                  google.charts.setOnLoadCallback(drawBasic_Aktualne_2_2);
                  function drawBasic_Aktualne_2_2() {
                      var data = new google.visualization.DataTable();
                      data.addColumn('number', 'čas');
                      data.addColumn('number', 'teplota');

                      data.addRows([
                        <?php while($dataGraf = ibase_fetch_object($getHumidity)) : ?>
                          <?=  $dataGraf->DATA ?>,
                        <?php endwhile ?>
                      ]);

                      var options = {
                        'title' :'How Much Pizza I Ate Last Night',
                        hAxis: {
                          title: 'Čas'
                        },
                        vAxis: {
                          title: 'Hodnota'
                        }
                      };
                      var chart = new google.charts.Line(document.getElementById('chart_aktualne1'));
                      chart.draw(data, options);
                    }
                  }
                  //Graf aktualne 2.2 KONEC
                } else if (str == "dennisouhrn") {
                  //Graf denni 1
                  google.charts.load('current', {'packages':['line']});
                  google.charts.setOnLoadCallback(drawChart4);
                  function drawChart4() {
                  google.charts.load('current', {'packages':['line']});
                  google.charts.setOnLoadCallback(drawBasic4);

                  function drawBasic4() {
                      var data = new google.visualization.DataTable();
                      data.addColumn('number', 'čas');
                      data.addColumn('number', 'teplota');

                      data.addRows([
                          [0,1],[0,2]
                    ]);

                      var options = {
                        'title':'Denní souhrn',
                        hAxis: {
                          title: 'Čas'
                        },
                        vAxis: {
                          title: 'Teplota'
                        }
                      };
                      var chart = new google.charts.Line(document.getElementById('chart_denni'));
                      chart.draw(data, options);
                    }
                  }
                  //Graf denni 1 KONEC
                } else if (str == "mesicnisouhrn") {
                  //Graf mesicni 1
                  google.charts.load('current', {'packages':['line']});
                  google.charts.setOnLoadCallback(drawChart5);
                  function drawChart5() {
                  google.charts.load('current', {'packages':['line']});
                  google.charts.setOnLoadCallback(drawBasic5);

                  function drawBasic5() {
                      var data = new google.visualization.DataTable();
                      data.addColumn('number', 'čas');
                      data.addColumn('number', 'teplota');

                      data.addRows([
                        [0,1],[1,2]
                      ]);

                      var options = {
                        'title':'How Much Pizza I Ate Last Night',
                        hAxis: {
                          title: 'Čas'
                        },
                        vAxis: {
                          title: 'Hodnota'
                        }
                      };
                      var chart = new google.charts.Line(document.getElementById('chart_mesicni'));
                      chart.draw(data, options);
                    }
                  }

                }

            }
        };
        //Graf mesicni 1 KONEC
        xmlhttp.open("GET","views/home/" + str + ".phtml",true);
        xmlhttp.send();
    }
  </script>
